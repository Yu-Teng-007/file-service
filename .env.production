# 生产环境配置文件
# 此文件包含生产环境特定的配置，会覆盖 .env 中的默认值
# 注意：生产环境中的敏感信息应通过环境变量或密钥管理系统设置

# 服务器配置
PORT=3001
NODE_ENV=production

# 文件存储配置
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=104857600
TEMP_DIR=/app/temp

# 安全配置（生产环境必须使用强密钥）
# 注意：以下值应在部署时通过环境变量覆盖
JWT_SECRET=eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30
JWT_EXPIRES_IN=12h
API_KEY=prod_fs_2025_9f8e7d6c5b4a3928374658291047382910473829104738291047382910473829

# CORS 配置（生产环境严格限制来源）
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# 速率限制（生产环境严格限制）
RATE_LIMIT_TTL=60
RATE_LIMIT_LIMIT=100

# Redis 缓存配置（生产环境推荐使用 Redis）
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_IN_PRODUCTION
REDIS_DB=0
CACHE_TTL=3600
CACHE_MAX_ITEMS=10000

# CDN 配置（生产环境推荐使用 CDN）
CDN_PROVIDER=aws
CDN_REGION=us-east-1
CDN_BUCKET=your-production-bucket
CDN_ACCESS_KEY_ID=CHANGE_THIS_IN_PRODUCTION
CDN_ACCESS_KEY_SECRET=CHANGE_THIS_IN_PRODUCTION
CDN_ENDPOINT=
CDN_CUSTOM_DOMAIN=cdn.yourdomain.com
CDN_ENABLE_HTTPS=true

# 监控配置（生产环境启用完整监控）
MONITORING_ACCESS_LOGGING=true
MONITORING_PERFORMANCE=true
MONITORING_STORAGE=true
MONITORING_LOG_RETENTION_DAYS=90
MONITORING_METRICS_RETENTION_DAYS=365

# 版本控制配置
VERSIONING_MAX_VERSIONS=10
VERSIONING_AUTO_ENABLED=true
VERSIONING_RETENTION_DAYS=90
VERSION_STORAGE_DIR=/app/versions

# 图片处理配置
IMAGE_PROCESSING_ENABLED=true
IMAGE_MAX_SIZE=50MB
IMAGE_QUALITY_DEFAULT=85

# 压缩配置
COMPRESSION_ENABLED=true
COMPRESSION_LEVEL=9

# 文件类型大小限制（字节）- 生产环境严格限制
MAX_IMAGE_SIZE=10485760
MAX_SCRIPT_SIZE=5242880
MAX_STYLE_SIZE=2097152
MAX_FONT_SIZE=5242880
MAX_DOCUMENT_SIZE=20971520
MAX_MUSIC_SIZE=52428800

# 存储提供商（生产环境推荐使用云存储）
STORAGE_PROVIDER=aws

# AWS S3 配置（如果使用 AWS）
AWS_ACCESS_KEY_ID=CHANGE_THIS_IN_PRODUCTION
AWS_SECRET_ACCESS_KEY=CHANGE_THIS_IN_PRODUCTION
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-production-s3-bucket

# 阿里云 OSS 配置（如果使用阿里云）
ALIYUN_ACCESS_KEY_ID=CHANGE_THIS_IN_PRODUCTION
ALIYUN_ACCESS_KEY_SECRET=CHANGE_THIS_IN_PRODUCTION
ALIYUN_OSS_REGION=oss-cn-hangzhou
ALIYUN_OSS_BUCKET=your-production-oss-bucket

# 缓存配置
CACHE_TTL=3600
ENABLE_COMPRESSION=true

# 日志配置（生产环境使用适中的日志级别）
LOG_LEVEL=info
LOG_DIR=/app/logs

# 数据库配置（生产环境使用专用数据库）
DATABASE_URL=postgresql://username:password@db-host:5432/fileservice_prod

# 安全功能（生产环境启用所有安全功能）
ENABLE_VIRUS_SCAN=true
VIRUS_SCAN_API_KEY=CHANGE_THIS_IN_PRODUCTION

# CDN 配置
CDN_URL=https://cdn.yourdomain.com
ENABLE_CDN=true

# 生产环境特定配置
DEBUG=false
ENABLE_SWAGGER=false
ENABLE_CORS_CREDENTIALS=false
ENABLE_REQUEST_LOGGING=false
ENABLE_ERROR_STACK_TRACE=false

# 性能配置
ENABLE_CLUSTERING=true
CLUSTER_WORKERS=0
ENABLE_GZIP=true
ENABLE_ETAG=true

# 健康检查配置
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_INTERVAL=30000

# SSL/TLS 配置
FORCE_HTTPS=true
SSL_CERT_PATH=/app/ssl/cert.pem
SSL_KEY_PATH=/app/ssl/key.pem
